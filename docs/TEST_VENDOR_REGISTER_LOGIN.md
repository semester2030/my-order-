# اختبار التسجيل وتسجيل الدخول (تطبيق المورد ↔ Render)

## 1. تشغيل التطبيق مع الربط على Render

من مجلد المشروع:

```bash
cd "/Users/fayez/Desktop/my order/vendor_app"
flutter run --dart-define=API_BASE_URL=https://my-order.onrender.com/api
```

- اختر الجهاز (محاكي أو جهاز حقيقي).
- إذا كان عنوان الباك اند مختلفاً (مثلاً subdomain آخر)، غيّر `https://my-order.onrender.com` إلى عنوانك.

---

## 2. اختبار التسجيل

1. في التطبيق، ادخل إلى **إنشاء حساب** / **تسجيل**.
2. أدخل بيانات **جديدة** (لم تُستخدم من قبل على Render):
   - **الاسم:** مثلاً "مطعم تجريبي"
   - **البريد:** بريد حقيقي أو فريد (مثل test-vendor-1@example.com)
   - **كلمة المرور:** 8 أحرف على الأقل
   - **الهاتف:** اختياري
   - **الفئة:** اختر واحدة
3. اضغط **تسجيل**.
4. **النتيجة المتوقعة:**
   - إما رسالة نجاح أو انتقال لشاشة تسجيل الدخول.
   - إذا ظهر خطأ (مثل "البريد مسجّل مسبقاً") فغيّر البريد وجرب مرة أخرى.

---

## 3. الموافقة على الحساب من لوحة الإدارة (مرة واحدة)

1. افتح المتصفح: **http://localhost:3002** (أو المنفذ الذي تشغّل عليه اللوحة).
2. سجّل الدخول للأدمن: `admin@platform.com` / `Admin@123`.
3. من القائمة: **المطاعم** → ستظهر قائمة المطاعم.
4. ابحث عن الحساب اللي سجّلته (مثلاً "مطعم تجريبي") — الحالة ستكون **"بانتظار الموافقة"**.
5. اضغط **عرض** → ثم **موافقة**.
6. بعد الموافقة يصبح الحساب **معتمد** ويمكن تسجيل الدخول منه من التطبيق.

---

## 4. اختبار تسجيل الدخول

1. في تطبيق المورد، ادخل إلى **تسجيل الدخول**.
2. أدخل **نفس البريد وكلمة المرور** اللي سجّلتهما في الخطوة 2.
3. اضغط **تسجيل الدخول**.
4. **النتيجة المتوقعة:**
   - دخول إلى الشاشة الرئيسية للمورد (الداشبورد).
5. **إن ظهر خطأ:**
   - "البريد الإلكتروني غير مسجّل" → تأكد أن التطبيق يشير إلى Render وأن التسجيل تم بنجاح.
   - "هذا الحساب ليس حساب مقدم خدمة" → نادر مع تطبيق المورد؛ تأكد أنك تستخدم endpoint تسجيل دخول الموردين.
   - "كلمة المرور غير صحيحة" → أعد إدخال كلمة المرور (انتبه للمسافات والأحرف الكبيرة/الصغيرة).
   - "انتهت المهلة أو لا يوجد اتصال" → Render قد يكون في وضع النوم؛ انتظر نحو دقيقة وجرب مرة أخرى.

---

## 5. اختبار سريع بحساب معتمد مسبقاً

إذا كان عندك بالفعل حسابات معتمدة (مثل Fayez أو Mansour):

1. شغّل التطبيق بنفس الأمر أعلاه (مع `API_BASE_URL` لـ Render).
2. ادخل **تسجيل الدخول** مباشرة.
3. البريد: مثلاً `fazlogistic1@gmail.com`  
   كلمة المرور: اللي سجّلها صاحب الحساب.
4. يفترض أن يتم الدخول دون الحاجة لتسجيل جديد أو موافقة إضافية.

---

## ملخص الأوامر

| الهدف              | الأمر |
|--------------------|--------|
| تشغيل التطبيق على Render | `flutter run --dart-define=API_BASE_URL=https://my-order.onrender.com/api` |
| تشغيل اللوحة محلياً      | من `admin_panel`: `npm run dev` |

بعد تنفيذ الخطوات 1–4 (أو 5) تكون قد اختبرت التسجيل وتسجيل الدخول من التطبيق مع الباك اند على Render.
