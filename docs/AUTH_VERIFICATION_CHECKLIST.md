# قائمة التحقق: التسجيل وتسجيل الدخول

لضمان نجاح عمليات التسجيل وتسجيل الدخول (تطبيق المورد ↔ الباك اند على Render).

## 1. قبل التشغيل

- [ ] **الباك اند:** متغير `DATABASE_URL` يشير إلى قاعدة بيانات Render (أو المحلية للاختبار).
- [ ] **تطبيق المورد:** عنوان الـ API مضبوط على `https://my-order.onrender.com` (أو نفس عنوان الباك اند).
  - في التشغيل: `--dart-define=API_BASE_URL=https://my-order.onrender.com/api`
  - أو في `env.dart` / إعداد البيئة المناسب.
- [ ] **Migrations:** تشغيل migrations على قاعدة البيانات المستخدمة:
  - من مجلد `backend`: `npm run migration:run`

## 2. الاستيقاظ البارد (Cold Start) على Render

عند عدم استخدام الخدمة لفترة، قد يستغرق الطلب الأول 30–60 ثانية (استيقاظ الخادم).

- [ ] إذا ظهر **خطأ في الخادم** أو **502/503**: انتظر ثوانٍ ثم اضغط **تسجيل** أو **تسجيل الدخول** مرة أخرى.
- [ ] لا تُدخل البيانات من جديد إن كانت الحقول ما زالت معبأة.

## 3. التسجيل (مقدم الخدمة)

- [ ] **الاسم:** حرفان على الأقل، بدون مسافات زائدة في البداية والنهاية.
- [ ] **البريد:** صيغة بريد صحيحة؛ يُخزَّن بحروف صغيرة (لا فرق بين الأحرف الكبيرة والصغيرة).
- [ ] **كلمة المرور:** مطلوبة؛ التطبيق والباك اند يتعاملان معها بعد تقليم المسافات.
- [ ] في حال **تعارض** (بريد أو اسم أو جوال مستخدم مسبقاً): ستظهر رسالة عربية من الخادم (مثل: "البريد الإلكتروني مسجّل مسبقاً").

## 4. تسجيل الدخول

- [ ] **البريد:** يمكن إدخاله بأي حالة أحرف؛ الدخول يعتمد على البريد المُخزَّن (صغير).
- [ ] **كلمة المرور:** كما أدخلها المستخدم (تُقَلَّم المسافات الطرفية).
- [ ] رسائل الخطأ من الخادم:
  - "البريد الإلكتروني غير مسجّل"
  - "هذا الحساب ليس حساب مقدم خدمة"
  - "كلمة المرور غير صحيحة"
  - "انتهت المهلة أو لا يوجد اتصال" (شبكة/مهلة)

## 5. التحقق السريع بعد النشر

1. من التطبيق: **تسجيل** حساب مقدم خدمة جديد (بريد لم يُستخدم من قبل).
2. تسجيل الخروج ثم **تسجيل الدخول** بنفس البريد وكلمة المرور.
3. إن فشل الطلب الأول (502/503): الانتظار ثم إعادة المحاولة دون تغيير البيانات.

إذا نجحت الخطوتان 1 و 2، يكون التسجيل والدخول يعملان بشكل سليم.
