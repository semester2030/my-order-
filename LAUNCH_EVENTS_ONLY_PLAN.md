# إطلاق المنصة بمناسبات فقط (إيقاف عرض المطاعم مؤقتاً)

## هل تقدر؟ **نعم.**

يمكنك **إغلاق عرض المطاعم حالياً** وإظهار **مناسبات فقط** — مناسبات شعبية (طبخ الذبايح في المنازل) ومناسبات خاصة (البوفيه المفتوح ومشتقاته). عند وصول انتشار كبير تُفعّل المطاعم لأن السستم جاهز. إيقاف خدمة المطاعم **سهل تقنياً** (تفعيل/إيقاف عبر إعداد أو feature flag).

---

## ١. نموذج الإطلاق المقترح

**شاشة الدخول:** أربع أيقونات على الأقل قبل الدخول على الفيديو — كل أيقونة لفئة مقدمي خدمة، مع بيانات وفلاتر خاصة بكل فئة. التفاصيل في **`ENTRY_SCREEN_FOUR_ICONS_SPEC.md`**.

| ما يظهر للمستخدم حالياً | ما يختفي مؤقتاً |
|------------------------|------------------|
| **أربع أيقونات:** الطبخ المنزلي، الطبخ الشعبي، المناسبات الخاصة، الشوي — كل أيقونة تفتح قائمة/فيديو مقدمي تلك الخدمة ببياناتها وفلاترها | الفيديو/الـ Feed الموحد (مطاعم)، الطلب للتوصيل، العربة، حجز طاولة داخل المطعم |
| **الطبخ المنزلي:** مقدمون + بيانات + فلاتر خاصة بالطبخ المنزلي | — |
| **الطبخ الشعبي:** طبخ الذبايح + مقدمون + بيانات + فلاتر خاصة بالذبايح | — |
| **المناسبات الخاصة:** البوفيه المفتوح ومشتقاته + مقدمون + بيانات + فلاتر خاصة | — |
| **الشوي:** مقدمو مناسبات الشوي + بيانات + فلاتر خاصة بالشوي | — |

بعد الانتشار: تُفعّل "مطاعم" (إن رغبتم) كفئة إضافية من نفس التطبيق دون تغيير بنيوي.

---

## ٢. هل إقفال خدمة المطاعم حالياً سهل؟

**نعم، سهل.**

| الآلية | الوصف |
|--------|--------|
| **Feature flag / إعداد في التطبيق** | متغير مثل `RESTAURANTS_ENABLED = false` (من ملف config أو من الـ Backend). التطبيق يقرأه عند التشغيل. |
| **بعد تسجيل الدخول** | إذا `RESTAURANTS_ENABLED = false` → التوجيه يكون إلى **الصفحة الرئيسية للمناسبات** (مناسبات شعبية / مناسبات خاصة) بدلاً من الـ Feed. |
| **إخفاء واجهات المطاعم** | إخفاء أو عدم تسجيل route الـ Feed من القائمة السفلية؛ إخفاء أيقونة "مطاعم" إن وُجدت؛ عدم عرض Cart و Checkout للتوصيل في الـ Bottom Nav إن كان التطبيق يعرضها. يمكن إبقاء الشاشات في الكود وإخفاء الوصول لها فقط. |
| **عند التفعيل لاحقاً** | تغيير `RESTAURANTS_ENABLED = true` (أو من لوحة الأدمن) وإعادة نشر التطبيق أو جلب الإعداد من السيرفر — تظهر المطاعم والـ Feed من جديد دون حذف أي كود. |

لا تحتاج حذف كود المطاعم أو الـ Backend؛ فقط **عدم استخدام** مسار المطاعم في الواجهة عند الإيقاف.

---

## ٣. خطوات التنفيذ (مختصرة)

### ٣.١ Backend

| الخطوة | الوصف |
|--------|--------|
| **إعداد عام (اختياري)** | جدول أو مفتاح إعدادات منصة مثل `platform_settings` يحتوي مفتاحاً مثل `restaurants_enabled` (true/false). تطبيق العميل يطلب `GET /api/settings` أو يمرّر الـ config مع الـ build. |
| **مناسبات شعبية vs خاصة** | تمييز نوع المناسبة: مثلاً حقل `event_category` = `popular` (مناسبات شعبية — ذبايح في المنازل) أو `private` (مناسبات خاصة — بوفيه مفتوح ومشتقاته). أو جدول `event_categories` مع سجلات (شعبية، خاصة). |
| **مقدمو الخدمة** | نفس نموذج Vendor؛ كل مقدم خدمة يحدد في فيوه: يقدم مناسبات شعبية (ذبايح) و/أو مناسبات خاصة (بوفيه). الفيديو والعروض كما في التصميم السابق. |

لا حاجة لإيقاف أي API للمطاعم؛ فقط لا يستدعيها التطبيق عندما تكون المطاعم مغلقة.

### ٣.٢ تطبيق العميل (Customer App)

| الخطوة | الوصف |
|--------|--------|
| **Config / Feature flag** | قراءة `restaurants_enabled` (أو ثابت في الـ build مثل `kRestaurantsEnabled = false`). |
| **بعد تسجيل الدخول** | إذا المطاعم مغلقة → التوجيه إلى **شاشة المناسبات الرئيسية** (أو "الرئيسية") بدلاً من الـ Feed. |
| **الشاشة الرئيسية (وضع مناسبات فقط)** | عرض خيارين واضحين: **مناسبات شعبية** (طبخ الذبايح في المنازل) و **مناسبات خاصة** (البوفيه المفتوح ومشتقاته). كل خيار يفتح قائمة/فيديو لمقدمي الخدمة في هذه الفئة. |
| **إخفاء واجهات المطاعم** | إخفاء الـ Feed من الـ Bottom Nav أو عدم إظهاره؛ إخفاء Cart و Orders من الـ Nav إن كانت مرتبطة بالتوصيل فقط (أو إبقاؤها للمناسبات لاحقاً). إخفاء route المطاعم من القائمة. |
| **الـ Bottom Nav** | استبدال "الرئيسية/Feed" بـ "مناسبات" (أو تبويبين: شعبية | خاصة). باقي الروابط (طلباتي، حجوزاتي، البروفايل) حسب ما تقدمه المنصة حالياً. |

### ٣.٣ لوحة المطعم / مقدم الخدمة (Vendor Web)

- لا تحتاج "إقفال"؛ مقدم الخدمة يفعّل من إعداداته: يقدم **مناسبات شعبية** (ذبايح) و/أو **مناسبات خاصة** (بوفيه). الطلبات العادية (Orders) يمكن إخفاؤها أو إبقاؤها فارغة حتى تفعيل المطاعم.

### ٣.٤ الأدمن بانل

- إعداد عام: `restaurants_enabled` (تفعيل/إيقاف عرض المطاعم من التطبيق) — اختياري لكنه مفيد لتفعيل المطاعم لاحقاً دون إعادة نشر التطبيق إذا كان التطبيق يقرأ الإعداد من السيرفر.

---

## ٤. الإيجابيات

| الجانب | الفائدة |
|--------|---------|
| **التركيز** | تركيز واحد على المناسبات (شعبية + خاصة) ورسالة واضحة للمستخدم: "منصة مناسبات". |
| **طبخ الذبايح** | وجود عدد كبير جداً من الراغبين بالانضمام يوفّر عرضاً غنياً من أول يوم ويخلق تأثير شبكة قوي. |
| **تقليل التعقيد عند الإطلاق** | عدم الخلط بين توصيل مطاعم وحجز مناسبات؛ تجربة واحدة واضحة. |
| **السستم جاهز لاحقاً** | عند التفعيل، المطاعم والـ Feed والطلب جاهزون؛ تفعيلهم بتبديل إعداد أو نشر نسخة جديدة. |
| **تمييز السوق** | منصة مناسبات (شعبية + خاصة) قد تكون أوضح في السوق من "تطبيق مطاعم + مناسبات" في البداية. |

---

## ٥. السلبيات والتخفيف

| السلبي | التخفيف |
|--------|----------|
| من يتوقّع مطاعم/توصيل لا يجدها | توضيح في المتجر وفي التطبيق: "منصة مناسبات حالياً — المطاعم قريباً". |
| الاعتماد على فئة واحدة (مثلاً الذبايح) | تنويع بـ "مناسبات خاصة" (بوفيه) من اليوم الأول ليكون الخياران متاحين. |
| جودة وسلامة طبخ الذبايح في المنازل | معايير انضمام لمقدمي الخدمة، تحقق من الهوية/التراخيص إن أمكن، وتقييمات ومراجعات. |
| عمليات التشغيل (لوجستيات، تواريخ، مدفوعات) | تبسيط التدفق: طلب → عرض سعر/قبول → تأكيد؛ لاحقاً دفعات مقدمة وعقود إن احتجتم. |

---

## ٦. ملخص سريع

- **هل تقدر؟** نعم.
- **إقفال عرض المطاعم حالياً:** سهل عبر إعداد/feature flag + توجيه المستخدم لشاشة "مناسبات" (شعبية / خاصة) وإخفاء وصول الـ Feed والطلب.
- **مناسبات شعبية:** طبخ الذبايح في المنازل.
- **مناسبات خاصة:** البوفيه المفتوح ومشتقاته.
- **عند الانتشار:** تفعيل المطاعم بتغيير الإعداد (أو من الأدمن) دون هدم السستم.
- **عدد كبير يريد الانضمام لطبخ الذبايح:** إيجابية قوية للتركيز على المناسبات أولاً.
