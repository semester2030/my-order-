# مواصفات الطبخ الشعبي (ذبايح في بيوت العملاء)

## التعريف

**الطبخ الشعبي** = طباخون يطبخون **الذبايح** (ولائم، مناسبات) **في بيوت العملاء**.

- **الطباخ يذهب إلى منزل العميل** — لا يطبخ في بيته ثم يوصّل.
- **الطباخ يجيب أغراض الطبخ كاملة** — أدوات، مكوّنات، كل ما يلزم للطبخ عند العميل.
- **الخدمة كلها في موقع العميل** — أي المناسبة/الوليمة في بيت العميل الذي طلب الخدمة.

---

## الفرق بين الطبخ المنزلي والطبخ الشعبي

| المعيار | الطبخ المنزلي | الطبخ الشعبي |
|--------|----------------|--------------|
| **أين يطبخ؟** | في بيت الطباخ | في بيت العميل |
| **من يتحرك؟** | العميل يستلم أو يُوصّل له | الطباخ يروح لبيت العميل |
| **أغراض الطبخ؟** | عند الطباخ (في مطبخه) | الطباخ يجيبها كاملة معه |
| **نوع الخدمة؟** | وجبات جاهزة + خدمات عند الطلب (أطباق، حلويات…) | ذبايح / ولائم في منزل العميل |
| **خيار الاستلام؟** | استلام من عند الطباخ **أو** توصيل الطلب | **لا يوجد** — الخدمة دائماً عند العميل (الطباخ يطبخ في بيته) |

---

## تدفق الطبخ الشعبي من منظور العميل

1. العميل يختار فئة **الطبخ الشعبي** (أيقونة الطبخ الشعبي).
2. يشاهد قائمة/فيديو مقدمي الخدمة (طباخين ذبايح).
3. يختار طباخًا → يطلب **ذبايح في بيته**:
   - نوع الذبيحة / نوع الوليمة
   - عدد الأشخاص
   - التاريخ والوقت
   - **عنوان العميل** (مكان المناسبة — بيت العميل)
   - ملاحظات (مثلاً: بدون بصل، حار، أدوات إضافية)
4. **لا خيار "استلام الطلب" أو "توصيل الطلب"** — الخدمة = الطباخ يصل إلى عنوانك ويطبخ عنده ويجيب أغراض الطبخ كاملة.

---

## خدمات إضافية وأطباق جانبية (سعر مستقل)

عند الطبخ الشعبي، الطباخ قد يقدّم **خدمات أخرى** غير طبخ الذبيحة نفسها — أطباق جانبية ترافق الوليمة الرسمية، ولكل منها **سعر خاص مستقل** عن سعر الطبخ الرئيسي.

### من يضيفها؟

- **الطباخ يضيف الخدمات الإضافية في التسجيل** (أو في لوحته بعد التسجيل).
- كل خدمة: **اسم** (مثل: جريش، قرصان، ادامات) + **سعر خاص**.
- بعد الإضافة تكون **متاحة للعميل** في صفحة هذا الطباخ وعند طلب ذبايح؛ العميل يطلب منها ما يريد (اختياري).

### أمثلة خدمات/أطباق جانبية

| الخدمة | الوصف | التسعير |
|--------|--------|---------|
| طبخ الذبيحة | الوليمة الرئيسية (الذبيحة) | سعر الطبخ (أساسي) |
| جريش | طبق جانبي مع الوليمة | **سعر خاص** |
| قرصان | طبق جانبي | **سعر خاص** |
| ادامات | أطباق إدامات/مرق جانبية | **سعر خاص** |
| أطباق أخرى | أي طبخات جانبية مع الوليمة | **سعر خاص** لكل صنف |

### قواعد التسعير

- **سعر الطبخ (الذبيحة/الوليمة):** سعر الخدمة الرئيسية.
- **الخدمات الإضافية (جريش، قرصان، ادامات، وغيرها):** لكل صنف **سعر خاص** — لا يُحسب ضمن سعر الطبخ، ودائماً يكون مفصولاً في العرض وفي الفاتورة.

### تدفق العميل

- عند طلب ذبايح من طباخ، يرى العميل قائمة **الخدمات الإضافية** التي أضافها هذا الطباخ (مع سعر كل واحدة).
- يختار الوليمة (سعر الطبخ) ويُضيف إن أراد من الأطباق الجانبية (جريش، قرصان، ادامات…) وكل إضافة لها سعرها الخاص.

---

## ملخص للمنصة

- **الطبخ المنزلي:** الطباخ يطبخ في بيته → العميل: استلام من عنده **أو** توصيل لموقعي.
- **الطبخ الشعبي:** الطباخ يطبخ في بيت العميل → الطباخ يجيب أغراض الطبخ كاملة ويطبخ الذبايح في منزل العميل؛ الخدمة دائماً في موقع العميل.
- **خدمات الطبخ الشعبي:** سعر الطبخ (الذبيحة/الوليمة) + خدمات إضافية (جريش، قرصان، ادامات، وغيرها) ولكل إضافة **سعر خاص مستقل** عن سعر الطبخ.

هذا التوضيح يُستخدم في الواجهات (نصوص، فلاتر، ونماذج طلب الطبخ الشعبي) بحيث لا يظهر خيار "استلام من عند الطباخ" في مسار الطبخ الشعبي، وتُعرض قائمة الخدمات الإضافية مع أسعارها الخاصة في عرض المقدم وفي نموذج الطلب.

---

## تنفيذ تقني (ملاحظة للـ Backend)

- **في التسجيل (Vendor Web):** عند اختيار فئة "الطبخ الشعبي (ذبايح)" يظهر قسم "خدمات إضافية (جريش، قرصان، ادامات…)" — الطباخ يضيف اسم كل خدمة وسعرها. تُرسل مع طلب التسجيل كحقل `popularCookingAddOns` (نص JSON: مصفوفة من `{ name, price }`).
- **الـ Backend:** يُفترض قبول الحقل `popularCookingAddOns` في تسجيل المقدم وتخزينه (جدول أو عمود JSON) بحيث يكون متاحاً عند جلب بيانات المقدم للعميل.
- **تطبيق العميل:** عند طلب ذبايح من طباخ، يُعرض للعميل قائمة الخدمات الإضافية لهذا المقدم مع سعر كل واحدة؛ العميل يختار ما يريد إضافتها للطلب.
- **إضافة العمود في قاعدة البيانات (بدون TypeORM migration):** شغّل مرة واحدة الملف `backend/add-popular-cooking-add-ons.sql` في عميل PostgreSQL (pgAdmin، DBeaver، أو psql) — أمر واحد فقط.
- **الداشبورد يتغير حسب الخدمة:** إذا كان المقدم من فئة **الطبخ الشعبي**، تظهر في القائمة الجانبية "الطلبات الجانبية" بدلاً من "الوجبات والخدمات" و"ما أقدمه للزبائن". الطباخ الشعبي يعدّل ويضيف الطلبات الجانبية (جريش، قرصان، ادامات…) من صفحة "الطلبات الجانبية" في الداشبورد فقط. إضافة وجبة/خدمة مع فيديو خاصة بالمطاعم/الطبخ المنزلي فقط.
